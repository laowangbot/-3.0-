# 简单测试程序使用说明

## 概述

提供两个简单的控制台测试程序，用于测试反查重功能的可行性。

## 程序说明

### 1. simple_test.py - 完整测试程序

**功能：**
- 完整的用户交互界面
- 支持消息范围选择
- 可选择是否启用反查重
- 详细的测试过程和结果

**使用方法：**
```bash
python simple_test.py
```

**交互流程：**
```
请输入源频道ID: -1001234567890
请输入目标频道ID: -1001234567891
请输入起始消息ID: 100
请输入结束消息ID: 200
是否启用反查重? (y/n): y
确认开始测试? (y/n): y
```

### 2. quick_test.py - 快速测试程序

**功能：**
- 简单的参数输入
- 快速测试反查重功能
- 直接显示结果

**使用方法：**
```bash
python quick_test.py
```

**交互流程：**
```
源频道ID: -1001234567890
目标频道ID: -1001234567891
起始消息ID: 100
结束消息ID: 200
```

## 环境准备

### 1. 设置环境变量
```bash
export API_ID="your_api_id"
export API_HASH="your_api_hash"
export BOT_TOKEN="your_bot_token"
```

### 2. 准备测试频道
- **源频道**：包含媒体消息的频道
- **目标频道**：机器人有发送权限的频道

### 3. 获取频道ID
- 频道ID格式：`-1001234567890`
- 可以通过机器人命令获取：`/get_chat_id`

## 测试流程

### 1. 运行测试程序
选择其中一个程序运行：
```bash
# 完整测试
python simple_test.py

# 快速测试
python quick_test.py
```

### 2. 输入参数
按照提示输入：
- 源频道ID
- 目标频道ID
- 消息ID范围

### 3. 观察结果
程序会自动：
- 获取指定范围的消息
- 测试反查重功能
- 尝试发送修改后的媒体组
- 显示测试结果

## 测试结果

### 成功情况
```
✅ 反查重测试成功
✅ 发送成功！反查重功能可行
   发送了 3 条消息
```

### 失败情况
```
❌ 发送失败: Invalid file_id
⚠️ 反查重功能不可行
```

## 结果判断

### 如果测试成功
- 文件ID修改功能可行
- 可以实施完整的反查重方案
- 包括：重排序 + 文件ID修改

### 如果测试失败
- 文件ID修改功能不可行
- 建议使用简化方案
- 包括：只重排序 + 修改标题

## 注意事项

1. **权限检查**：确保机器人有访问源频道和发送到目标频道的权限
2. **消息范围**：确保指定的消息ID范围内有媒体消息
3. **频率限制**：测试时会添加延迟避免触发频率限制
4. **测试环境**：建议在测试环境进行，避免影响生产数据

## 常见问题

### Q: 提示"Chat not found"
A: 检查频道ID是否正确，机器人是否有访问权限

### Q: 提示"Invalid file_id"
A: 文件ID修改功能不可行，建议使用简化方案

### Q: 没有找到媒体消息
A: 检查消息ID范围，确保范围内有包含媒体的消息

### Q: 发送失败
A: 检查目标频道权限，确保机器人有发送权限

## 后续步骤

### 测试成功后
1. 实施完整的反查重方案
2. 集成到搬运引擎
3. 添加用户界面控制

### 测试失败后
1. 实施简化反查重方案
2. 只使用重排序功能
3. 添加标题修改功能

## 联系支持

如果遇到问题：
1. 检查控制台错误信息
2. 确认环境配置正确
3. 验证频道权限
4. 联系技术支持




















