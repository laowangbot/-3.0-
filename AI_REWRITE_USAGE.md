# AI文本改写功能使用指南

## 功能概述

AI文本改写功能是ByBot 3.0的一项新增功能，旨在帮助用户在搬运内容时自动修改文本和标签，以避免平台查重机制。该功能集成了Google Gemini 2.5 Flash Live模型，提供高质量的文本改写服务。

## 配置要求

要使用AI文本改写功能，您需要：

1. Google Gemini API密钥（默认使用系统配置的密钥）
2. 确保已安装必要的依赖包

## 功能特点

### 1. 默认关闭，按需启用
- 功能默认处于关闭状态，需要用户主动启用
- 提供灵活的开关控制机制

### 2. 多层次控制
- 全局设置：通过[/ai_settings](file:///C:/Users/PC/Desktop/bybot3.0/ai_settings)命令配置
- 任务级别：通过命令参数临时控制
- 模式选择：自动、强制、原文三种模式

### 3. 智能额度管理
- 利用Gemini 2.5 Flash Live的免费额度（每日15M输入/5M输出tokens）
- 额度用尽时自动降级为原文搬运
- 提供详细的额度使用情况查看

### 4. 灵活的改写选项
- 三种改写强度：轻微、中等、强烈
- 多种标签处理方式：优化、替换、扩展、保留

### 5. 预览功能
- 提供[/ai_preview](file:///C:/Users/PC/Desktop/ai_preview)命令预览改写效果
- 在实际应用前可以预览改写结果

## 使用方法

### 1. 启用AI文本改写功能

发送命令：
```
/ai_settings
```

在打开的菜单中点击"🟢 开启"按钮启用功能。

### 2. 配置改写参数

在[/ai_settings](file:///C:/Users/PC/Desktop/bybot3.0/ai_settings)菜单中，您可以配置：

- **处理模式**：
  - 🔄 自动：有额度时改写，无额度时原文搬运
  - ⚡ 强制：必须改写（额度用尽时会失败）
  - 📄 原文：不进行AI改写

- **改写强度**：
  - ⚪ 轻微：最小化改动
  - ⚫ 中等：适度改写
  - ⚪ 强烈：大幅重写

- **标签处理**：
  - 🔖 优化：智能优化标签
  - 🔄 替换：替换为相关标签
  - ➕ 扩展：在原有基础上增加标签
  - 🔒 保留：保留原始标签

### 3. 预览改写效果

在实际使用前，可以使用[/ai_preview](file:///C:/Users/PC/Desktop/ai_preview)命令预览改写效果：

```
/ai_preview <要预览的文本>
```

例如：
```
/ai_preview 今天天气很好，适合外出游玩。#天气 #美好时光
```

系统将返回改写预览结果，您可以查看改写效果是否符合预期。

### 4. 在评论搬运中使用AI改写

在使用[/comment_clone](file:///C:/Users/PC/Desktop/bybot3.0/comment_clone)命令时，添加参数启用AI改写：

```
/comment_clone <源频道> <目标频道> <目标消息ID> <消息ID1> [消息ID2] ... --ai-rewrite=on
```

或者使用默认设置（如果已在[/ai_settings](file:///C:/Users/PC/Desktop/bybot3.0/ai_settings)中启用）：

```
/comment_clone <源频道> <目标频道> <目标消息ID> <消息ID1> [消息ID2] ...
```

### 5. 查看AI状态

发送命令查看AI改写状态：
```
/ai_status
```

## 文本格式处理

### 标签处理
AI改写会保持标签在文本的第一行，内容从第二行开始。例如：

原文：
```
#科技 #新闻
最新研究表明，人工智能在医疗诊断领域的应用越来越广泛。
```

改写后：
```
#科技 #新闻
根据最新研究显示，人工智能在医疗诊断方面的应用正变得日益广泛。
```

### 小尾巴处理
如果消息配置了添加小尾巴功能，AI改写不会修改小尾巴内容，只会改写主要文本部分。

## 额度说明

### 免费额度
- 每日输入tokens：15,000,000 (15M)
- 每日输出tokens：5,000,000 (5M)
- 约可处理12,500条中等长度文本的改写任务

### 额度重置
- 每日UTC+8 00:00自动重置

### 额度耗尽处理
- 在自动模式下，额度用尽时会自动降级为原文搬运
- 系统会发送提醒通知用户额度状态

## 最佳实践

### 1. 合理配置改写强度
- 对于需要保持原意的内容，建议使用"中等"强度
- 对于需要较大变化的内容，可以使用"强烈"强度

### 2. 使用预览功能
- 在正式使用前，先用[/ai_preview](file:///C:/Users/PC/Desktop/ai_preview)命令预览效果
- 根据预览结果调整改写强度和模式

### 3. 监控额度使用
- 定期使用[/ai_status](file:///C:/Users/PC/Desktop/bybot3.0/ai_status)命令检查额度使用情况
- 在额度接近耗尽时及时调整使用策略

### 4. 选择合适的模式
- 日常使用推荐"自动"模式，平衡效果和稳定性
- 特殊需求可使用"强制"模式确保改写效果

## 常见问题

### 1. 为什么有时没有进行AI改写？
可能原因：
- AI功能未开启
- 额度已用尽且处于自动模式
- 文本内容过短或无法改写

### 2. 如何知道是否进行了AI改写？
在评论搬运任务报告中会明确标识每条消息是否经过AI改写：
- ✨ 表示已AI改写
- 📄 表示原文搬运

### 3. 改写后的效果如何？
Gemini 2.5 Flash Live模型会保持文本的核心信息不变，通过同义词替换、句式调整等方式进行改写，确保内容质量和可读性。

## 技术支持

如在使用过程中遇到问题，请查看相关文档或联系技术支持。